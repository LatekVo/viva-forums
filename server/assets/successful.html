<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Processing URL</title>
</head>
<body>
  <script>

    const url = new URL(window.location.href);

    if (url.searchParams.has('error')) {
        window.location.href = "index.html&error=" + url.searchParams.get('error');
    }

    const hash = url.searchParams.get("hash");

    // one year long cookie
    const date = new Date();
    date.setTime(date.getTime()+(365*24*60*60*1000));

    const expires = "; expires="+date.toGMTString();

    document.cookie = "hash=" + hash + expires + "; path=/";

    window.onload = function() {
      // similar behavior as clicking on a link
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
